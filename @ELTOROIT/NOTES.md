# New Notes

-   Updated for TrailbrazerDX 23

## Steps

All the changes to the code are done in this folder (`./_OriginalScripts`), because the export script overrides the other folder (`../PCTesterScript`) which is the repo for the machines to be tested!

1. Create scratch org `./@ELTOROIT/scripts/shell/CreateOrg.sh`
2. Create new event record `https://flow-inspiration-27-dev-ed.lightning.force.com/lightning/o/Event__c/list`
3. [optional] Clone actions from previous event by executing `./@ELTOROIT/scripts/Apex/CloneEvent.apex` (Need to manually update the Ids first)
4. Create new actions if needed
5. Export data `./@ELTOROIT/scripts/shell/ExportData.sh`
    - This exports the data using JSON for the script
    - Copies the files from `./_OriginalScripts` to the parent folder `../PCTesterScript`
    - Commits and updates the repo in Github to be run in the machines being tested
    - Exports the data from the org using ETCopyData for backup
6. Setting a **new** machine? (Starting a new event)
    - Login to TeamViewer
        - Vendor will provide with `Teamviewer ID` (for example, 855 316 036) and a `Password`
        - Open in Mac the `TeamViewer.app`
          - Salesforce does not allow for TeamViewer to run in a Salesforce provided computer
          - I can use a VM from Cloudshare for this!
        - Under `Remote Control`, on the right side the `Control Remote Computer` enter the `Partner ID` (which is the same number provided by the vendor)
        - Click `Connect`
        - Enter the password provided by the vendor
        - click `Logon`
    - Machine requires some software
      - GIT (`https://git-scm.com/download/win`)
        - `git`
      - Node.js (`https://nodejs.org/en/`)
        - `node`
        - `.exit` to quit
      - VS Code to see the logs
        - `code`
    - Clone the repo
        - Create a folder named **C:\TEMP**
          - Windows + R
          - `cmd`
          - `mkdir C:\TEMP`
        - Clone the **PCTesterScript.git** repo
        -  `git clone https://github.com/eltoroit/PCTesterScript.git`
        - Copy file **t.bat** to **C:\Users\Admin**
          - `cd cd PCTesterScript`
          - `copy t.bat C:\Users\Admin`
        - Copy **test.bat** file to **C:\TH**
          - `mkdir C:\TH`
          - `copy test.bat C:\TH`
7. Start the testing process
   - Open command prompt
     - Windows + R
     - `cmd`
   - Type `t`
8. Loop: Run tests, fix data in org, export data, run `t`. Repeat.
    - This can be anoying if you have to do the manual tests always ðŸ˜Ž
    - In that case...
        - Quick tests
            1. Open cmd (`Start | cmd`)
            2. Type `t`
            3. Select option `99`
        - If you need to re-run it
            - Execute `tt` from the same folder where the last execution stopped
        - Execute in debug mode
            4. `cd C:\TH\PCTesterScript`
            5. `node --inspect-brk tester.js -test -run=1`
    - Errors are stored in this file `C:\TH\Errors-2022-08-09T12-27-54.085Z` (with the most recent timestamp ðŸ˜Ž)
9. When the only errors left are the bookmarks...
    - Once script runs on the testing machine, it creates one file with the bookmarks `C:\TH\PCTesterScript\bmDump.json`.
    - Use that to generate `C:\TH\PCTesterScript\bmCheck.json` which is used to validate the bookmarks
    - Process
        1. Run the tests on the VM
        2. Bring the file `C:\TH\PCTesterScript\bmDump.json` to your local machine `./_OriginalScripts/bmDump.json`
        3. Execute this command `cat ./_OriginalScripts/bmDump.json | jq .bm | jq 'del(.[].urlChrome)' | jq 'del(.[].urlFirefox)' > ./_OriginalScripts/bmCheck.json`
        4. Export data `./@ELTOROIT/scripts/shell/ExportData.sh`
        5. Test the VM bookmarks by running the process again.

## Bookmarks files

-   **bmCheck.txt**
    -   This file indicates what needs to be tested.
    -   The way it's generated is by running the script and copying the bmDump.txt file and then making any necesary adjustments.
-   **bmDump.txt**
    -   This file gets generated by the script everytime it runs with the results of the bookmarks processed.
    -   It's used for cofiguring the _bmCheck.txt_ file
        -   Same content
        -   Different name
        -   I do not want to override the original file everytime it runs so I create a different filename.
-   **bmPretend.txt**
    -   File for testing in Mac
    -   Copy _bmDump.txt_ to this file
    -   This is the data that gets generated when the bookmarks are read from the borwsers.
    -   Because I write the code in a computer that is not the PCs to be tested (PCs are Windows and I write the code in Mac) I need to have the data so I can write the scripts.
    -   **THIS FILE SHOULD NOT EXIST WHEN TESTING THE MACHINES.**

### VM

1. Install VS Code
   1. https://code.visualstudio.com/
2. Install Git
   1. https://git-scm.com/download/win
3. Install Node
   1. https://nodejs.org/en
4. Ensure files are located at the correct locations
    1. C:\Users\Admin\t.bat
    2. C:\TH\test.bat
5. Execute normal operation
    1. Open CMD
    2. Type `t` and hit enter

**Note:** Additional notes found here: ./@ELTOROIT/Old Events/OLD_NOTES.md